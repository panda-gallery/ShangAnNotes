---
title: 容斥原理
description: 容斥原理在行测数量关系中的应用与解题技巧，包含公式推导、真题讲解和技巧总结。
keywords: 容斥原理, 客厅问题, 集合论, 文氏图, 数量关系, 行测, 公务员考试
---

import BlurredAnswer from '@/components/ui/BlurredAnswer';
import FollowMe from '@/components/FollowMe';

# 容斥原理

容斥原理是行测数量关系中的高频考点，它源于集合论，主要用于解决多个交叉集合的计数问题。因其模型多变，也被一些考生戏称为“客厅问题”。理解并熟练运用容斥原理，可以有效破解看似复杂的数量关系题。

## 一、核心概念与公式推导

### 核心思想

容斥原理的核心思想可以概括为：<span style={{color:'red'}}>“先加后减，重加再减”</span>。当计算多个集合并集的元素总数时，我们先把每个集合的元素数量全部加起来，然后减去那些因为重复计算而被多加的部分。如果涉及三个或更多集合，这个过程会更加复杂，需要交替进行加减，以确保每个元素最终只被计算一次。

### 1. 两个集合的容斥原理

**问题**：喜欢语文（集合A）<span style={{color:'red'}}>或</span> 喜欢数学（集合B）的同学一共有多少人？
我们想求的是两个集合的并集，记为 $$|A \cup B|$$。

- **第一步：简单相加** $$|A| + |B|$$
- **第二步：发现问题** <span style={{color:'orange'}}>那些既喜欢语文又喜欢数学的同学（$$|A \cap B|$$），被计算了两次</span>。
- **第三步：减去重复** 

  $$|A \cup B| = |A| + |B| - |A \cap B|$$

**实用变形**
在很多题目中，我们会遇到“总数”和“两者都不”的情况。此时，公式可以变形为：
<span style={{color:'red'}}>总数 - 两者都不 = |A| + |B| - |A ∩ B|</span>

### 2. 三个集合的容斥原理

现在，我们再增加一个条件：喜欢英语的有 `C` 些同学。

**问题**：喜欢语文、数学 <span style={{color:'red'}}>或</span> 英语的同学一共有多少人？
我们要求的是三个集合的并集 $$|A \cup B \cup C|$$。

- **第一步：简单相加** $$|A| + |B| + |C|$$
- **第二步：减去两两相交的部分** $$... - (|A \cap B| + |A \cap C| + |B \cap C|)$$
- **第三步：发现新的问题** <span style={{color:'orange'}}>那些同时喜欢语、数、外三门学科的同学（$$|A \cap B \cap C|$$）</span>，在第一步被加了3次，第二步被减了3次，相当于被完全忽略了。
- **第四步：加回三者相交的部分**

  $$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$

**非标准型公式**
当题目没有直接给出两两相交的人数，而是给出“只满足两项”这类条件时，直接使用标准公式会很困难。此时，可以采用以下两个核心变形公式：

1.  **从个体加和角度**
    <span style={{color:'red'}}>总人数 = (只满足一项的人数) + (只满足两项的人数) + (满足三项的人数) + (都不满足的人数)</span>

2.  **从集合整体角度（更常用）**
    这个公式由公式1推导而来，是解题的利器：
    <span style={{color:'red'}}>总人数 - 都不满足 = |A| + |B| + |C| - (只满足两项的人数之和) - 2 \times (满足三项的人数)</span>

## 二、题型分类与真题讲解

### 1. 两集合容斥问题

**例1**：（2023年省考）
某单位107名职工，78人捐衣物，77人捐食品，求既捐衣物又捐食品的人数。

<BlurredAnswer>
**第一步：明确问题**
题目给出了总人数、参与A的人数、参与B的人数，求二者交集。

**第二步：识别信息与公式**
- 总数 = 107人。题目中没有提及有人未捐，我们假设所有人都参与了捐赠，即“都不满足”为0。
- 设捐衣物为集合A，捐食品为集合B。|A| = 78, |B| = 77。
- 求 |A ∩ B|。
- 使用实用变形公式：总数 - 两者都不 = |A| + |B| - |A ∩ B|

**第三步：代入求解**
$$107 - 0 = 78 + 77 - |A \cap B|$$
$$107 = 155 - |A \cap B|$$
$$|A \cap B| = 155 - 107 = 48$$

**结论**：既捐衣物又捐食品的有48人。
</BlurredAnswer>

### 2. 标准三集合容斥问题

**例2**：
某班级有100名学生，其中参加篮球队的有30人，参加足球队的有25人，参加乒乓球队的有28人。已知参加篮球和足球的有10人，参加篮球和乒乓球的有12人，参加足球和乒乓球的有8人，三个队都参加的有5人。问至少参加一项运动的学生有多少人？

<BlurredAnswer>
**第一步：明确问题**
要求“至少参加一项运动的学生人数”，即三个集合的并集。

**第二步：识别信息**
- 设A=篮球队, B=足球队, C=乒乓球队。
- |A|=30, |B|=25, |C|=28
- |A ∩ B|=10, |A ∩ C|=12, |B ∩ C|=8
- |A ∩ B ∩ C|=5

**第三步：套用公式**
根据三集合容斥原理标准公式：
$$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$
代入数据：
$$|A \cup B \cup C| = 30 + 25 + 28 - (10 + 12 + 8) + 5$$
$$|A \cup B \cup C| = 83 - 30 + 5 = 58$$

**结论**：至少参加一项运动的学生有58人。
</BlurredAnswer>

---

**例3**：（2022年国考）
对120种食品进行检测，抗氧化剂达标的有68种，防腐剂达标的有77种，漂白剂达标的有59种；抗氧化剂与防腐剂均达标的有54种，防腐剂与漂白剂均达标的有43种，抗氧化剂与漂白剂均达标的有35种，三项均达标的有30种。求三项均不达标的种数。

<BlurredAnswer>
**第一步：明确问题**
求“三项均不达标”的数量，即全集与并集的差集。

**第二步：识别信息**
- 总数 = 120
- 设A=抗氧化剂达标, B=防腐剂达标, C=漂白剂达标。
- |A|=68, |B|=77, |C|=59
- |A ∩ B|=54, |A ∩ C|=35, |B ∩ C|=43
- |A ∩ B ∩ C|=30
- 设三项均不达标为 x。

**第三步：套用公式求解**
首先计算至少一项达标的数量（并集）：
$$|A \cup B \cup C| = (68 + 77 + 59) - (54 + 43 + 35) + 30$$
$$|A \cup B \cup C| = 204 - 132 + 30 = 102$$
这102种是至少一项达标的。
三项均不达标的数量 = 总数 - 至少一项达标的数量
$$x = 120 - 102 = 18$$

**结论**：三项均不达标的有18种。
</BlurredAnswer>

---

**例4**：（2020年新疆卷）
246名员工，订阅A期刊125人，B期刊126人，C期刊135人；订阅A、B期刊57人，A、C期刊73人，三种期刊31人；17人不订阅任何期刊。求订阅B、C期刊人数。

<BlurredAnswer>
**第一步：明确问题**
这是标准三集合问题，但其中一个两两相交的项未知，需要反向求解。

**第二步：识别信息**
- 总数 = 246, 都不满足 = 17, 所以并集 |A ∪ B ∪ C| = 246 - 17 = 229。
- |A|=125, |B|=126, |C|=135
- |A ∩ B|=57, |A ∩ C|=73, |A ∩ B ∩ C|=31
- 设订阅B、C期刊人数为 x, 即 |B ∩ C| = x

**第三步：套用公式求解**
将所有已知信息代入标准公式：
$$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$
$$229 = 125 + 126 + 135 - (57 + 73 + x) + 31$$
$$229 = 386 - (130 + x) + 31$$
$$229 = 386 - 130 - x + 31$$
$$229 = 287 - x$$
$$x = 287 - 229 = 58$$

**结论**：订阅B、C期刊的有58人。
</BlurredAnswer>

### 3. 非标准三集合容斥问题

**例5**：（2021年联考）
某机关139人，参加讲座A的有42人，讲座B的有51人，讲座C的有88人；只参加两场讲座的有30人，三场都参加的有12人。求未参加任何讲座的人数。

<BlurredAnswer>
**第一步：明确问题**
题目条件是“只参加两场”，这是非标准模型的典型特征。求“未参加任何讲座”的人数。

**第二步：识别信息与公式**
- 总数 = 139
- |A|=42, |B|=51, |C|=88
- 只满足两项的人数之和 = 30
- 满足三项的人数 = 12
- 设未参加任何讲座（都不满足）的人数为 x。
- 使用非标准型公式：
  总人数 - 都不满足 = |A| + |B| + |C| - (只满足两项的人数之和) - 2 × (满足三项的人数)

**第三步：代入求解**
$$139 - x = (42 + 51 + 88) - 30 - 2 \times 12$$
$$139 - x = 181 - 30 - 24$$
$$139 - x = 127$$
$$x = 139 - 127 = 12$$

**结论**：未参加任何讲座的有12人。
</BlurredAnswer>

### 4. 文氏图与比例结合

**例6**：
实验室通过测评Ⅰ和Ⅱ来核定产品的等级：两项测评都不合格的为次品，仅一项测评合格的为中品，两项测评都合格的为优品。某批产品只有测评Ⅰ合格的产品数是优品数的2倍，测评Ⅰ合格和测评Ⅱ合格的产品数之比为6∶5。若该批产品次品率为10%，则该批产品的优品率为：

- A. 10%
- B. 15%
- C. 20%
- D. 25%

<BlurredAnswer>
**第一步：画文氏图并明确各部分含义**
画两个相交的圆，分别代表测评Ⅰ合格和测评Ⅱ合格。
- 两圆相交部分：两项都合格，即“优品”。
- 只在Ⅰ圆内的部分：只有测评Ⅰ合格，是“中品”的一部分。
- 只在Ⅱ圆内的部分：只有测评Ⅱ合格，也是“中品”的一部分。
- 两圆之外的部分：两项都不合格，即“次品”。

**第二步：利用比例关系赋值**
- 设“优品”数量为 $$x$$。
- 根据“只有测评Ⅰ合格的产品数是优品数的2倍”，可知只有测评Ⅰ合格的数量为 $$2x$$。
- “测评Ⅰ合格”的总数 = (只有测评Ⅰ合格) + (优品) = $$2x + x = 3x$$。
- 根据“测评Ⅰ合格和测评Ⅱ合格的产品数之比为6∶5”，可知测评Ⅱ合格的总数为 $$(3x) \times \frac{5}{6} = 2.5x$$。
- 为了避免小数，我们可以<span style={{color:'red'}}>将优品数赋值为2</span>。
    - 优品 = 2。
    - 只有测评Ⅰ合格 = 2 * 2 = 4。
    - 测评Ⅰ合格总数 = 4 + 2 = 6。
    - 测评Ⅱ合格总数 = 6 * (5/6) = 5。
    - 只有测评Ⅱ合格 = (测评Ⅱ合格总数) - (优品) = 5 - 2 = 3。

**第三步：计算总数和优品率**
- 产品总数中，合格品包括：只有Ⅰ合格 + 只有Ⅱ合格 + 优品 = 4 + 3 + 2 = 9 (份)。
- 次品率为10%，意味着合格率是 90%。
- 这 9 份合格品对应了总数的 90%。
- 所以，总数 = $$9 \div 90\% = 10$$ (份)。
- 优品有 2 份。
- 优品率 = (优品份数 / 总份数) = $$2 / 10 = 20\%$$。

**结论**：答案为 C. 20%。
</BlurredAnswer>

### 5. 多集合反向构造求最值

当题目涉及多个集合（通常大于等于四个），且问题是“至少有多少人...都喜欢”或“至多有多少人...都不喜欢”时，应使用反向构造的思路。

**例7**：
某社团共有46人，其中35人爱好戏剧，30人爱好体育，38人爱好写作，40人爱好收藏。这个社团至少有多少人以上四项活动都喜欢?

- A. 5
- B. 6
- C. 7
- D. 8

<BlurredAnswer>
**第一步：正向思考的困境**
如果用标准容斥原理，四个集合的公式极其复杂，且题目未提供任何交集信息，无法直接计算。

**第二步：转换思路（反向构造）**
题目要求“四项都喜欢的<span style={{color:'red'}}>至少</span>有多少人”，我们可以从反面思考：<span style={{color:'red'}}>不喜欢任意一项的人数最多是多少</span>。
如果一个人四项都喜欢，那么他就不属于任何“不喜欢XX”的群体。
总人数 - (至少不喜欢一项的人数) = (四项都喜欢的人数)
为了让“四项都喜欢的人数”最少，我们需要让“至少不喜欢一项的人数”<span style={{color:'orange'}}>最多</span>。

**第三步：计算补集**
- 总人数：46人
- 不爱戏剧的人数：46 - 35 = 11人
- 不爱体育的人数：46 - 30 = 16人
- 不爱写作的人数：46 - 38 = 8人
- 不爱收藏的人数：46 - 40 = 6人

**第四步：求补集的并集最大值**
我们希望“至少不爱一项”的人数最多。这个最大值在<span style={{color:'orange'}}>假设这些“不爱”的群体之间没有重叠时</span>取到。
- 最多有多少人至少不爱一项 = (不爱戏剧) + (不爱体育) + (不爱写作) + (不爱收藏)
- 最多人数 = 11 + 16 + 8 + 6 = 41人。
- 这41人是“有不爱好的”人的上限。

**第五步：作差求解**
- 四项都喜欢的人数 = 总人数 - 至少不爱一项的人数
- 至少四项都喜欢的人数 = 46 - 41 = 5人。

**秒杀公式**：
对于此类问题，可以总结一个快速公式：
至少都满足的人数 = (A+B+C+D+...) - (n-1) * 总人数
其中 n 是集合的数量。
本题中：(35 + 30 + 38 + 40) - (4-1) * 46 = 143 - 3 * 46 = 143 - 138 = 5人。

**结论**：答案为 A. 5。
</BlurredAnswer>


## 三、技巧总结

1.  **识别题型是关键**：
    - **两集合问题**：通常最简单，直接套用基础公式或其变形。
    - **标准三集合型**：题干直接给出各部分人数，直接套标准公式。
    - **非标准三集合型**：给出“只参加...”或“至少参加...”等条件，需要对标准公式进行变形或使用非标准型公式。
    - **比例型**：出现比例关系，画文氏图并赋值求解是最佳策略。
    - **最值型**：问“至少...都”或“至多...不都”，果断使用反向构造法。

2.  **公式的理解与记忆**：
    - 两集合：$$|A \cup B| = |A| + |B| - |A \cap B|$$
    - 两集合变形：**总数 - 都不 = |A| + |B| - |A ∩ B|**
    - 三集合标准：$$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$
    - 三集合非标准：**总数 - 都不 = |A|+|B|+|C| - (只两项) - 2*(全三项)**
    - <span style={{color:'red'}}>核心是“奇加偶减”以及理解每个公式的使用场景</span>。

3.  **文氏图（Venn Diagram）的威力**：
    - 对于二、三集合问题，特别是条件复杂时，画图能让关系一目了然。
    - 图中每个区域代表什么要清晰，如“仅A”、“A与B相交但不含C”等。

4.  **反向构造的逻辑**：
    - 求“全都满足的至少有多少”，等价于求“至少一项不满足的至多有多少”。
    - A + B + C - (n-1)I 这个公式是解决这类问题的利器，务必掌握。

5.  **注意关键词辨析**：
    - <span style={{color:'orange'}}>"A和B"</span> 指的是交集 $$|A \cap B|$$。
    - <span style={{color:'orange'}}>"A或B"</span> 指的是并集 $$|A \cup B|$$。
    - <span style={{color:'orange'}}>"只参加A和B"</span> 指的是 $$(|A \cap B| - |A \cap B \cap C|)$$ （在三集合问题中）。
    - <span style={{color:'orange'}}>"至少参加一项"</span> 是指并集。
    - <span style={{color:'orange'}}>"一项都没参加"</span> 是指全集减去并集。

<FollowMe />