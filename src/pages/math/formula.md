# 数量关系核心公式

## 1. 概率问题

1.  **基本公式**
    -   古典概率：$P(A) = \frac{\text{事件A包含的基本事件数}}{\text{总基本事件数}}$
    -   几何概率：$P(A) = \frac{\text{构成事件A的区域测度}}{\text{试验的全部结果构成的区域测度}}$

2.  **概率运算**
    -   **互斥事件** (事件A和B不能同时发生)：$P(A \cup B) = P(A) + P(B)$
    -   **对立事件** (事件A不发生)：$P(\bar{A}) = 1 - P(A)$
    -   **独立事件** (事件A的发生与否不影响事件B的发生)：$P(A \cap B) = P(A) \times P(B)$
    -   **一般事件** (A或B发生)：$P(A \cup B) = P(A) + P(B) - P(A \cap B)$

3.  **多次独立重复试验（伯努利试验）**
    在 $n$ 次独立重复试验中，事件A每次发生的概率都是 $p$，那么事件A恰好发生 $k$ 次的概率为：
    $$
    P(X=k) = C_n^k p^k (1-p)^{n-k}
    $$
    其中，$C_n^k$ 为组合数，表示从n个元素中取出k个元素的组合方式。

> **典型例题**
> **题目**：抛一枚硬币3次，恰好出现2次正面的概率是多少？
> **解析**：
> 这是伯努利试验。$n=3, k=2, p=0.5$。
> 概率为 $P(X=2) = C_3^2 (0.5)^2 (1-0.5)^{3-2} = 3 \times 0.25 \times 0.5 = 0.375$。

## 2. 工程问题

1.  **基本公式**
    -   工作总量 $=$ 工作效率 $\times$ 工作时间
    -   合作效率 $=$ 效率之和 (前提：各方同时开始、效率可直接相加)
    -   合作总量 $=$ 合作效率 $\times$ 合作时间

2.  **比例关系**
    -   工作量一定，工作效率与工作时间成**反比**。
    -   工作时间一定，工作效率与工作量成**正比**。
    -   工作效率一定，工作量与工作时间成**正比**。

3.  **解题技巧：赋值法**
    -   **时间赋值**：若题目只给定完成某项工作的各自时间，可对**工作总量**进行赋值。通常赋为所有时间的最小公倍数，以简化计算。
        > 例如：甲单独完成需要10天，乙单独完成需要15天。可设工作总量为30（10和15的最小公倍数），则甲的效率为3，乙的效率为2。
    -   **效率赋值**：若题目只给定效率之间的比例关系，可对**工作效率**进行赋值，一般赋为1或按比例赋值。

> **典型例题**
> **题目**：一项工程，甲队单独做需要20天完成，乙队单独做需要30天完成。两队合作，需要多少天完成？
> **解析**：
> 使用赋值法。假设工作总量为60（20和30的最小公倍数）。
> 则甲队的效率为 $60 \div 20 = 3$。
> 乙队的效率为 $60 \div 30 = 2$。
> 两队合作的效率为 $3 + 2 = 5$。
> 合作完成所需时间为 $60 \div 5 = 12$ 天。

## 3. 牛吃草问题

牛吃草问题的本质是"追及问题"的变体。草场的草量分为两部分：原有的草（存量）和新长出的草（增量）。牛吃草的速度要超过草生长的速度才能将草吃完。

**核心公式**：
$y_0 = (N - v_g) \times T$
-   $y_0$: 原有草量 (存量)
-   $N$: 牛的数量 (等同于吃的速度)
-   $v_g$: 草的生长速度 (以每天等价于多少头牛的食量计算)
-   $T$: 吃的天数
-   $(N - v_g)$: 净消耗速度，即牛吃草速度与草生长速度的差值。

1.  **计算草的生长速度 ($v_g$)**
    若有两组数据 $(N_1, T_1)$ 和 $(N_2, T_2)$，由于原有草量不变，则：
    $y_0 = (N_1 - v_g) \times T_1 = (N_2 - v_g) \times T_2$
    解得：
    $$
    v_g = \frac{N_1 T_1 - N_2 T_2}{T_1 - T_2}
    $$
    > **注意**：如果计算出的 $v_g$ 为负数，说明草场在枯萎，此时等同于有"负的牛"在帮助吃草。

2.  **计算原有草量 ($y_0$)**
    将 $v_g$ 代入任意一组数据即可。
    $$
    y_0 = (N - v_g) \times T
    $$

> **典型例题**
> **题目**：一片牧场，27头牛6天可以吃完，23头牛9天可以吃完。如果要18天吃完，需要多少头牛？
> **解析**：
> 1. 求草生长速度 $v_g$: $v_g = \frac{27 \times 6 - 23 \times 9}{6 - 9} = \frac{162 - 207}{-3} = 15$ (头/天)
> 2. 求原有草量 $y_0$: $y_0 = (27 - 15) \times 6 = 12 \times 6 = 72$ (单位草量)
> 3. 求18天吃完所需的牛数 $N$: $72 = (N - 15) \times 18 \implies N - 15 = 4 \implies N = 19$ (头)

## 4. 行程问题

1.  **基础公式**
    -   路程 $=$ 速度 $\times$ 时间 ($S=vt$)
    -   平均速度：
        -   **等时间平均速度**：$\bar{V} = \frac{V_1+V_2+\dots+V_n}{n}$ (适用于每段运动时间相同)
        -   **等距离平均速度**（调和平均数）：$\bar{V} = \frac{n}{\frac{1}{V_1}+\frac{1}{V_2}+\dots+\frac{1}{V_n}}$ (适用于每段运动距离相同)
        -   常见等距离平均速度（$n=2$）：$\bar{V} = \frac{2V_1V_2}{V_1+V_2}$

2.  **相遇与追及**
    -   相遇（迎面而来）：路程和 $=$ 速度和 $\times$ 相遇时间
    -   追及（同向而行）：路程差 $=$ 速度差 $\times$ 追及时间

3.  **环形路程**
    -   反向而行（相遇）：第 $N$ 次相遇，路程和 $= N \times$ 环路周长
    -   同向而行（追及）：第 $N$ 次追及，路程差 $=$ N \times$ 环路周长

4.  **直线多次相遇**
    -   从两端出发：第 $N$ 次相遇，路程和 $= (2N-1) \times$ 全程
    -   从一端出发：第 $N$ 次相遇，路程和 $= 2N \times$ 全程

5.  **车过桥与队伍行进**
    -   车过桥（车头上桥到车尾离桥）：路程 $=$ 桥长 $+$ 车长
    -   车完全在桥上：路程 $=$ 桥长 $-$ 车长
    > **示例**：一列长100米的火车以20米/秒的速度通过一座长900米的大桥，从车头上桥到车尾离桥需要 $(900+100) \div 20 = 50$ 秒。

6.  **流水行船**
    -   顺水速度 $v_{顺} = v_{船} + v_{水}$
    -   逆水速度 $v_{逆} = v_{船} - v_{水}$
    -   船速 $v_{船} = \frac{v_{顺} + v_{逆}}{2}$
    -   水速 $v_{水} = \frac{v_{顺} - v_{逆}}{2}$

7.  **往返相遇（两岸问题）**
    -   从不同岸出发：第一次相遇点离甲岸距离为 $d_1$，第二次相遇点离乙岸距离为 $d_2$，则河宽 $S = 3d_1 - d_2$。
    -   从同一岸出发：第一次相遇点离对岸距离为 $d_1$，第二次相遇点离甲岸距离为 $d_2$，则河宽 $S = 3d_1 + d_2$。

## 5. 经济利润问题

1.  **基本公式**
    -   利润 $=$ 售价 $-$ 成本
    -   利润率 $= \frac{\text{利润}}{\text{成本}} = \frac{\text{售价} - \text{成本}}{\text{成本}} = \frac{\text{售价}}{\text{成本}} - 1$
    -   售价 $=$ 成本 $\times (1 + \text{利润率})$
    -   成本 $=$ 售价 $\div (1 + \text{利润率})$

2.  **折扣**
    -   售价 $=$ 定价 $\times$ 折扣数 (例如8折即乘以0.8)
    -   折扣率 $= 1 - $ 折扣数 (例如8折，折扣率为 $1 - 0.8 = 0.2$ 或 20%)

> **典型例题**
> **题目**：一件商品成本为100元，打八折出售后仍能获利20%，求该商品的定价。
> **解析**：
> 1. 期望售价 = 成本 × (1 + 利润率) = 100 × (1 + 20%) = 120元。
> 2. 定价 = 期望售价 ÷ 折扣数 = 120 ÷ 0.8 = 150元。

## 6. 排列组合问题

1.  **排列** (从 $n$ 个不同元素中取出 $m$ 个，**考虑顺序**)
    $$
    A_n^m = \frac{n!}{(n-m)!} = n(n-1)\dots(n-m+1)
    $$
    -   全排列：$A_n^n = n!$

2.  **组合** (从 $n$ 个不同元素中取出 $m$ 个，**不考虑顺序**)
    $$
    C_n^m = \frac{A_n^m}{m!} = \frac{n!}{m!(n-m)!}
    $$
    -   性质：$C_n^m = C_n^{n-m}$，$C_n^0 = C_n^n = 1$

3.  **常见技巧**
    -   **捆绑法**：要求某几个元素必须相邻。先将相邻元素看作一个整体，再与其他元素排列，最后考虑整体内部的排列。
        > 例：甲乙丙丁4人排队，要求甲乙必须相邻。可将甲乙捆绑为1个整体，与丙丁共3个元素全排列，有 $A_3^3=6$ 种。甲乙内部可交换顺序，有 $A_2^2=2$ 种。总方法数为 $6 \times 2 = 12$ 种。
    -   **插空法**：要求某几个元素必须不相邻。先排列其他元素，再将不相邻的元素插入到空位中。
        > 例：3个男生和2个女生排队，要求女生不相邻。先排3个男生，有 $A_3^3=6$ 种。男生之间及两端共形成4个空位，将2个女生插入4个空位，有 $A_4^2=12$ 种。总方法数为 $6 \times 12 = 72$ 种。
    -   **隔板法**：用于解决"相同物品分配给不同对象，每人至少一件"的问题。将 $n$ 个相同物品分给 $m$ 个人（每人至少一个），相当于在 $n-1$ 个空隙中插入 $m-1$ 个隔板。方法数为 $C_{n-1}^{m-1}$ 种。

## 7. 容斥原理

1.  **二集合容斥**
    -   公式：$|A \cup B| = |A| + |B| - |A \cap B|$
    -   应用：总数 = A类 + B类 - A和B共有 + 都不是A或B
    > **示例**：班里有30人，18人喜欢篮球，15人喜欢足球，8人两项都喜欢。则喜欢篮球或足球的总人数为 $18 + 15 - 8 = 25$ 人。两项都不喜欢的有 $30 - 25 = 5$ 人。

2.  **三集合容斥**
    -   公式：$|A \cup B \cup C| = |A|+|B|+|C| - (|A \cap B|+|A \cap C|+|B \cap C|) + |A \cap B \cap C|$
    -   韦恩图辅助理解：总数 = (只满足A + 只满足B + 只满足C) + (只满足AB + 只满足AC + 只满足BC) + (满足ABC) + (都不满足)

## 8. 几何问题

1.  **周长与面积**
    -   正方形：周长 $4a$，面积 $a^2$
    -   长方形：周长 $2(a+b)$，面积 $ab$
    -   圆形：周长 $2\pi r$，面积 $\pi r^2$
    -   三角形：面积 $\frac{1}{2}ah$
    -   梯形：面积 $\frac{1}{2}(a+b)h$
    -   扇形：弧长 $l = \frac{n}{360} \cdot 2\pi r$，面积 $S = \frac{n}{360} \cdot \pi r^2 = \frac{1}{2}lr$ ($n$为圆心角度数)

2.  **表面积与体积** (单位：立方米、立方厘米等)
    -   正方体：表面积 $6a^2$，体积 $a^3$
    -   长方体：表面积 $2(ab+ac+bc)$，体积 $abc$
    -   球体：表面积 $4\pi r^2$，体积 $\frac{4}{3}\pi r^3$
    -   圆柱：表面积 $2\pi r^2 + 2\pi rh$，体积 $\pi r^2h$
    -   圆锥：体积 $\frac{1}{3}\pi r^2h$

3.  **多边形内角和**
    -   n边形内角和 $=(n-2) \times 180^\circ$
    -   任意多边形外角和恒为 $360^\circ$
    > 例：正五边形内角和为 $(5-2) \times 180^\circ = 540^\circ$；正六边形内角和为 $(6-2) \times 180^\circ = 720^\circ$。

## 9. 钟表问题

1.  **速度**
    -   分针速度：$6^\circ$/分钟
    -   时针速度：$0.5^\circ$/分钟
    -   速度差（分针追时针）：$5.5^\circ$/分钟

2.  **公式**
    -   追及角度 $=$ 速度差 $\times$ 追及时间
    -   $t$ 分钟内，分针比时针多走的度数 $= 5.5t$
    -   **夹角公式**：$m$ 时 $n$ 分，时针与分针夹角 $\theta = |30m - 5.5n|$ (结果大于180°时，用360°减去它)。
    -   **重合问题**：从 $m$ 点开始，下次重合时间 $t = \frac{30m}{5.5}$ 分钟。

## 10. 周期问题

1.  **基本公式**
    -   总个数 $\div$ 周期长度 $=$ 周期数 $\dots$ 余数
    -   若余数是 $k$，则与周期中第 $k$ 个元素相同；若整除，则与周期中最后一个元素相同。
        > **例**：数列 1, 2, 3, 4, 1, 2, 3, 4... 周期为4。求第100项。$100 \div 4 = 25$ 余 0，所以第100项与周期中第4个元素相同，为4。

2.  **日期推算**
    -   平年365天（52周余1天），闰年366天（52周余2天）。
    -   判断闰年：能被4整除但不能被100整除，或者能被400整除。

## 11. 最值问题

1.  **最不利构造（抽屉原理）**
    -   方法：考虑最差的情况再加1。即"最不利情况数 + 1"。
        > **例**：盒中有10个红球、8个白球、5个黄球，至少摸出多少个球才能保证有2个同色球？
        > **解析**：最不利的情况是每种颜色各摸出1个，即摸出1红+1白+1黄=3个球。此时再摸出任意1个球，就必然能凑成2个同色球。所以至少需要 $3+1=4$ 个。

2.  **和定差小积大，差定和小编小**
    -   两个正数的和一定，当两个数相等或最接近时，乘积最大。
    -   两个正数的积一定，当两个数相差越大时，和越大。

3.  **均值不等式**
    -   两个正数 $a, b$：$\frac{a+b}{2} \ge \sqrt{ab}$，当且仅当 $a=b$ 时取等号。
    -   三个正数 $a, b, c$：$\frac{a+b+c}{3} \ge \sqrt[3]{abc}$，当且仅当 $a=b=c$ 时取等号。
    -   应用：和为定值 $S$，积有最大值；积为定值 $P$，和有最小值。

## 12. 浓度问题

1.  **基本公式**
    -   溶液 $=$ 溶质 $+$ 溶剂
    -   浓度 $= \frac{\text{溶质}}{\text{溶液}} \times 100\%$
    -   溶质 $=$ 溶液 $\times$ 浓度

2.  **十字交叉法**
    适用于两种溶液混合问题，用来计算混合浓度或混合比例。
    $$
    \frac{\text{溶液A质量}}{\text{溶液B质量}} = \frac{|\text{浓度B} - \text{混合浓度}|}{|\text{浓度A} - \text{混合浓度}|}
    $$
    > **图示**
    > 浓度A \ / 混合浓度 - 浓度B
    >   \ /
    > 混合浓度
    >   / \
    > 浓度B / \ 浓度A - 混合浓度
    > **例**：将浓度为20%和50%的两种溶液混合成浓度为30%的溶液，则两种溶液的质量比为 $|50\%-30\%|:|20\%-30\%| = 20\%:10\% = 2:1$。

## 13. 植树问题

1.  **非闭合线路**
    -   两端都植树：棵数 $=$ 总长 $\div$ 间距 $+ 1$ (间隔数 = 棵树 - 1)
    -   一端植树：棵数 $=$ 总长 $\div$ 间距
    -   两端都不植树：棵数 $=$ 总长 $\div$ 间距 $- 1$

2.  **闭合线路（环形植树）**
    -   棵数 $=$ 总长 $\div$ 间距 (间隔数 = 棵树)

3.  **楼间植树（锯木头）**
    -   问题本质是计算"间隔"或"次数"。
    -   锯木头：锯开的**段数** = 锯的**次数** + 1

## 14. 空瓶换酒问题

-   **不可借瓶**：$N$ 个空瓶可以换1瓶酒，则 $X$ 个空瓶最多可以喝到的酒的数量为 $\lfloor \frac{X-1}{N-1} \rfloor$ 瓶（向下取整）。
    > 例：3个空瓶换1瓶酒，有10个空瓶。最多喝 $\lfloor \frac{10-1}{3-1} \rfloor = \lfloor 4.5 \rfloor = 4$ 瓶酒。
-   **可以借瓶**：如果规则允许先借一个空瓶再归还，则为 $\lfloor \frac{X}{N-1} \rfloor$ 瓶。
    > 例：同上，若可借，最多喝 $\lfloor \frac{10}{3-1} \rfloor = 5$ 瓶酒。
-   *通常题目默认为不可借。*

## 15. 不定方程

形如 $ax+by=c$ 的方程，其中 $a, b, c$ 为已知整数，求解整数解 $x, y$。
**求解技巧**：
1.  **奇偶性**：分析各项的奇偶性，缩小解的范围。
2.  **尾数法**：分析 $ax$ 和 $by$ 的尾数特征。
3.  **整除法**：移项变形，如 $ax = c - by$，则 $c-by$ 必须能被 $a$ 整除。
4.  **代入排除**：将选项代入验证，通常是最快的方法。

> **通解**：若求得一组特解 $(x_0, y_0)$，则通解为 $x = x_0 + \frac{b}{gcd(a,b)}k$, $y = y_0 - \frac{a}{gcd(a,b)}k$，其中 $k$ 为任意整数，$gcd(a,b)$为a和b的最大公约数。在公考中，通常只需找到一个符合题意的正整数解。